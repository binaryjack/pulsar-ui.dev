/**
 * PHASE 5: Context API & Dependency Injection
 * Refactored with modular components
 */

import { PageHeader } from '../common/components/page-header.psr';
import { DemoSection } from '../common/components/demo-section.psr';
import { 
  ThemeContext, 
  ThemeProvider, 
  UserContext, 
  UserProvider, 
  SettingsContext, 
  SettingsProvider 
} from './components/index.ts';
import { ThemedBox } from './components/themed-box.psr';
import { UserProfile } from './components/user-profile.psr';
import { ThemeControls } from './components/theme-controls.psr';
import { UserControls } from './components/user-controls.psr';

export component ContextTestPage() {
  return (
    <div>
      <PageHeader 
        title="Context API & Dependency Injection"
        emoji="ðŸ”Œ"
        color="#8b5cf6"
        description="Demonstrates createContext, useContext, and Provider pattern"
      />
      
      <ThemeProvider>
        {() => (
          <UserProvider>
            {() => (
              <SettingsProvider>
                {() => (
                  <>
                    <DemoSection 
                      title="1ï¸âƒ£ Theme Context" 
                      description="Share theme state across components without prop drilling"
                      borderColor="#8b5cf6">
                      <div style="margin-bottom: 20px;">
                        <ThemeControls />
                      </div>
                      <ThemedBox />
                    </DemoSection>
                    
                    <DemoSection 
                      title="2ï¸âƒ£ User Context" 
                      description="Manage user authentication state globally"
                      borderColor="#10b981">
                      <div style="margin-bottom: 20px;">
                        <UserControls />
                      </div>
                      <UserProfile />
                    </DemoSection>
                    
                    <DemoSection 
                      title="3ï¸âƒ£ Multiple Contexts" 
                      description="Components can consume multiple contexts simultaneously"
                      borderColor="#f59e0b">
                      <div style="padding: 15px; background: #0a0a0a; border: 2px dashed #64748b; border-radius: 4px;">
                        <p style="margin: 0 0 10px 0; color: #8b5cf6; font-weight: bold;">
                          ðŸŽ¯ Deeply Nested Component
                        </p>
                        <p style="margin: 0; color: #94a3b8; font-size: 14px;">
                          This component can access all contexts without prop drilling
                        </p>
                      </div>
                    </DemoSection>
                  </>
                )}
              </SettingsProvider>
            )}
          </UserProvider>
        )}
      </ThemeProvider>
    </div>
  );
}
