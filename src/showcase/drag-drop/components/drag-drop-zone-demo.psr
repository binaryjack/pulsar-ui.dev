/**
 * Drag-Drop Zone Demo
 * File upload interface with drag-drop
 */

import { createSignal, ShowRegistry as Show, ForRegistry as For } from '@pulsar-framework/pulsar.dev';

export component DragDropZoneDemo() {
  const [isDragging, setIsDragging] = createSignal(false);
  const [files, setFiles] = createSignal<string[]>([]);
  
  const handleDragEnter = (e: DragEvent) => {
    e.preventDefault();
    setIsDragging(true);
  };
  
  const handleDragLeave = (e: DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
  };
  
  const handleDragOver = (e: DragEvent) => {
    e.preventDefault();
  };
  
  const handleDrop = (e: DragEvent) => {
    e.preventDefault();
    setIsDragging(false);
    
    if (e.dataTransfer?.files) {
      const fileNames = Array.from(e.dataTransfer.files).map(f => f.name);
      setFiles([...files(), ...fileNames]);
    }
  };
  
  const clearFiles = () => setFiles([]);
  
  return (
    <div>
      <div 
        onDragEnter={handleDragEnter}
        onDragLeave={handleDragLeave}
        onDragOver={handleDragOver}
        onDrop={handleDrop}
        style={`padding: 60px 40px; border: 3px dashed ${isDragging() ? '#06b6d4' : '#475569'}; border-radius: 12px; text-align: center; background: ${isDragging() ? 'rgba(6, 182, 212, 0.1)' : '#0a0a0a'}; transition: all 0.2s; cursor: pointer;`}>
        <div style={`font-size: 48px; margin-bottom: 15px; transition: all 0.2s; ${isDragging() ? 'transform: scale(1.2);' : ''}`}>
          ğŸ“
        </div>
        <p style="margin: 0; color: #94a3b8; font-size: 16px;">
          {isDragging() ? 'Drop files here...' : 'Drag and drop files here'}
        </p>
      </div>
      
      <Show when={files().length > 0}>
        <div style="margin-top: 20px; padding: 20px; background: #0f172a; border: 2px solid #3a5458; border-radius: 8px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h4 style="margin: 0; color: #06b6d4; font-size: 14px;">
              ğŸ“ Uploaded Files ({files().length})
            </h4>
            <button 
              onClick={clearFiles}
              style="padding: 6px 12px; background: transparent; color: #ef4444; border: 1px solid #ef4444; border-radius: 4px; cursor: pointer; font-size: 12px;">
              Clear All
            </button>
          </div>
          <For each={files()}>
            {(file) => (
              <div style="padding: 8px 12px; margin-bottom: 6px; background: #1a1a1a; border-radius: 4px; color: #e2e8f0; font-size: 14px;">
                ğŸ“„ {file}
              </div>
            )}
          </For>
        </div>
      </Show>
    </div>
  );
}
